<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ContactForm extends Model
{
    use HasFactory;
    /* 
        createë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ì¼ PHP ë¬¸ìœ¼ë¡œ ìƒˆ ëª¨ë¸ì„ "ì €ìž¥"í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
        ì‚½ìž…í•œ ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ê°€, ì´ ë©”ì†Œë“œì— ì˜í•´ ëŒë ¤ì£¼ì–´ì§‘ë‹ˆë‹¤.

        ë‹¤ë§Œ, createë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì—, ëª¨ë¸ í´ëž˜ìŠ¤ì—ì„œ fillableë˜ëŠ” guardedí”„ë¡œí¼í‹°ì„ ì§€ì •í•  í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤. 
        ëª¨ë“  Eloquent ëª¨ë¸ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ì¤‘ í• ë‹¹ ì·¨ì•½ì ìœ¼ë¡œë¶€í„° ë³´í˜¸ë˜ë¯€ë¡œ ì´ëŸ¬í•œ ì†ì„±ì´ í•„ìˆ˜ìž…ë‹ˆë‹¤

        ë‹¤ì¤‘ í• ë‹¹ ê°€ëŠ¥í•œ ì†ì„±ì„ ì§€ì •í•œ í›„ì—ëŠ” createë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆ ë ˆì½”ë“œë¥¼ ì‚½ìž…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    */ 

    /*  ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›
         create ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— í•´ë‹¹ ëª¨ë¸ í´ëž˜ìŠ¤ì—ì„œ  ì‚¬ìš©í•  í”„ë¡œí¼í‹°ë¥¼ ë¯¸ë¦¬ ì§€ì •í•´ì¤€ë‹¤
        ë‹¤ì¤‘ í• ë‹¹ ê°€ëŠ¥í•œ ì†ì„±ì„ $fillable ì•ˆì— ì§€ì •í•œ í›„ì—ëŠ” createë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ DBì— ìƒˆ ë ˆì½”ë“œë¥¼ ì‚½ìž…í•  ìˆ˜ ìžˆë‹¤
    */
    protected $fillable = [ // ë³µìˆ˜ ëŒ€ìž… ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ëª¨ë¸ ì†ì„±ì„ ì •ì˜ => form ì†ì„±ìœ¼ë¡œ ë°›ì•„ì˜¬ ë‚´ìš©ë“¤ì„ ë„£ì–´ì¤€ë‹¤
        'name',
        'title',
        'email',
        'url',
        'gender',
        'age',
        'contact',
    ];

    //protected $guarded // ì§€ì •í•œ ì¹¼ëŸ¼ ì œì™¸í•˜ê³  ìž…ë ¥ ê°€ëŠ¥

    // ë©”ì„œë“œ ì´ë¦„ ë§¨ ì•žì— scope ë¶™ì´ê¸° ,ì²« ë²ˆì§¸ ì¸ìˆ˜ëŠ” $queryã€ë‘ ë²ˆì§¸ ì¸ìˆ˜ì— ì „í•´ì ¸ ì˜¤ëŠ” ì¸ìˆ˜ 
    public function scopeSearch($query, $search)
    {
      if($search !== null){
        $search_split = mb_convert_kana($search, 's'); // ì¼ë³¸ì–´ì¸ ê²½ìš° ì „ê° ìŠ¤íŽ˜ì´ìŠ¤ë¥¼ ë°˜ê° 
        $search_split2 = preg_split('/[\s]+/', $search_split); //ê³µë°± ë”°ê°œê¸°
      foreach( $search_split2 as $value ){
      $query->where('name', 'like', '%' .$value. '%'); } 
    }
    return $query;
    } 
}
