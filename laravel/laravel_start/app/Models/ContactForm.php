<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ContactForm extends Model
{
    use HasFactory;
    /* 
        createë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ì¼ PHP ë¬¸ìœ¼ë¡œ ìƒˆ ëª¨ë¸ì„ "ì €ìž¥"í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
        ì‚½ìž…í•œ ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ê°€, ì´ ë©”ì†Œë“œì— ì˜í•´ ëŒë ¤ì£¼ì–´ì§‘ë‹ˆë‹¤.

        ë‹¤ë§Œ, createë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì—, ëª¨ë¸ í´ëž˜ìŠ¤ì—ì„œ fillableë˜ëŠ” guardedí”„ë¡œí¼í‹°ì„ ì§€ì •í•  í•„ìš”ê°€ ìžˆìŠµë‹ˆë‹¤. 
        ëª¨ë“  Eloquent ëª¨ë¸ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ì¤‘ í• ë‹¹ ì·¨ì•½ì ìœ¼ë¡œë¶€í„° ë³´í˜¸ë˜ë¯€ë¡œ ì´ëŸ¬í•œ ì†ì„±ì´ í•„ìˆ˜ìž…ë‹ˆë‹¤

        ë‹¤ì¤‘ í• ë‹¹ ê°€ëŠ¥í•œ ì†ì„±ì„ ì§€ì •í•œ í›„ì—ëŠ” createë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆ ë ˆì½”ë“œë¥¼ ì‚½ìž…í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    */ 

    /*  ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›ðŸ’›
         create ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— í•´ë‹¹ ëª¨ë¸ í´ëž˜ìŠ¤ì—ì„œ  ì‚¬ìš©í•  í”„ë¡œí¼í‹°ë¥¼ ë¯¸ë¦¬ ì§€ì •í•´ì¤€ë‹¤
        ë‹¤ì¤‘ í• ë‹¹ ê°€ëŠ¥í•œ ì†ì„±ì„ $fillable ì•ˆì— ì§€ì •í•œ í›„ì—ëŠ” createë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ DBì— ìƒˆ ë ˆì½”ë“œë¥¼ ì‚½ìž…í•  ìˆ˜ ìžˆë‹¤
    */
    protected $fillable = [ // ë³µìˆ˜ ëŒ€ìž… ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ëª¨ë¸ ì†ì„±ì„ ì •ì˜ => form ì†ì„±ìœ¼ë¡œ ë°›ì•„ì˜¬ ë‚´ìš©ë“¤ì„ ë„£ì–´ì¤€ë‹¤
        'name',
        'title',
        'email',
        'url',
        'gender',
        'age',
        'contact',
    ];


    //protected $guarded // ì§€ì •í•œ ì¹¼ëŸ¼ ì œì™¸í•˜ê³  ìž…ë ¥ ê°€ëŠ¥



    /* ðŸŸ¢ Modelì˜ ë©”ì†Œë“œë¡œ ì •ì˜ëœ Local Scope ðŸŸ¢ */
    /*  
      ì‚¬ìš©ìžê°€ ìž…ë ¥í•œ ê²€ìƒ‰ì–´ë¥¼ ì²˜ë¦¬í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§
      ìŠ¤ì½”í”„ëŠ” ì¼ì¢…ì˜ ì¿¼ë¦¬ í•„í„°ë¡œ, íŠ¹ì • ì¿¼ë¦¬ ë¡œì§ì„ ìž¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. 
      ì¦‰, ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ ì¡°ê±´ì„ ë©”ì†Œë“œë¡œ ë§Œë“¤ì–´ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 
      ë©”ì†Œë“œ ì´ë¦„ ì•žì— 'scope'ë¥¼ ë¶™ì—¬ì„œ ì •ì˜í•©ë‹ˆë‹¤.
    */
    // ðŸŸ¢ðŸŸ¢ ì´ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” search ë¼ê³ ë§Œ ìž…ë ¥í•˜ë©´ ëœë‹¤
    public function scopeSearch($query, $search)  // ë©”ì„œë“œ ì´ë¦„ ë§¨ ì•žì— scope ë¶™ì´ê¸° , ì²« ë²ˆì§¸ ì¸ìž $queryëŠ” ì¿¼ë¦¬ ë¹Œë”ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë©°, ë‘ ë²ˆì§¸ ì¸ìž $searchëŠ” ì‚¬ìš©ìžê°€ ìž…ë ¥í•œ ê²€ìƒ‰ í‚¤ì›Œë“œ
    {
      // ðŸŸ¢ ê²€ìƒ‰ì–´ê°€ ìž…ë ¥ ë˜ì–´ìžˆìœ¼ë©´ ì‹¤í–‰ 
      if($search !== null){ 
        // $search_split = mb_convert_kana($search, 's'); // ì¼ë³¸ì–´ì¸ ê²½ìš° ì „ê° ìŠ¤íŽ˜ì´ìŠ¤ë¥¼ ë°˜ê° 
        // $search_split2 = preg_split('/[\s]+/', $search_split); //ê³µë°± ë”°ê°œê¸°
   
        $search_split2 = preg_split('/[\s]+/', $search); // í•œêµ­ì–´ ê³µë°± ë”°ê°œê¸°

        //ðŸŸ¢ ë”°ê°œì§„ ê²€ìƒ‰ì–´ ê°œìˆ˜ ë§Ží¼ ë°˜ë³µ í•˜ë©´ì„œ ë‹¨ì–´ í™•ì¸
        foreach( $search_split2 as $value ){
          $query->where('name', 'like', '%' .$value. '%'); 
        } 
      }

      return $query;
    } 

}
