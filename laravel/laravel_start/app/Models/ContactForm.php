<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ContactForm extends Model
{
    use HasFactory;
    /* 
        createë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ì¼ PHP ë¬¸ìœ¼ë¡œ ìƒˆ ëª¨ë¸ì„ "ì €ì¥"í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        ì‚½ì…í•œ ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ê°€, ì´ ë©”ì†Œë“œì— ì˜í•´ ëŒë ¤ì£¼ì–´ì§‘ë‹ˆë‹¤.

        ë‹¤ë§Œ, createë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì—, ëª¨ë¸ í´ë˜ìŠ¤ì—ì„œ fillableë˜ëŠ” guardedí”„ë¡œí¼í‹°ì„ ì§€ì •í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. 
        ëª¨ë“  Eloquent ëª¨ë¸ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ì¤‘ í• ë‹¹ ì·¨ì•½ì ìœ¼ë¡œë¶€í„° ë³´í˜¸ë˜ë¯€ë¡œ ì´ëŸ¬í•œ ì†ì„±ì´ í•„ìˆ˜ì…ë‹ˆë‹¤

        ë‹¤ì¤‘ í• ë‹¹ ê°€ëŠ¥í•œ ì†ì„±ì„ ì§€ì •í•œ í›„ì—ëŠ” createë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆ ë ˆì½”ë“œë¥¼ ì‚½ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    */ 

    /*  ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›ğŸ’›
         create ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— í•´ë‹¹ ëª¨ë¸ í´ë˜ìŠ¤ì—ì„œ  ì‚¬ìš©í•  í”„ë¡œí¼í‹°ë¥¼ ë¯¸ë¦¬ ì§€ì •í•´ì¤€ë‹¤
        ë‹¤ì¤‘ í• ë‹¹ ê°€ëŠ¥í•œ ì†ì„±ì„ $fillable ì•ˆì— ì§€ì •í•œ í›„ì—ëŠ” createë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ DBì— ìƒˆ ë ˆì½”ë“œë¥¼ ì‚½ì…í•  ìˆ˜ ìˆë‹¤
    */
    protected $fillable = [ // ë³µìˆ˜ ëŒ€ì… ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ëª¨ë¸ ì†ì„±ì„ ì •ì˜ => form ì†ì„±ìœ¼ë¡œ ë°›ì•„ì˜¬ ë‚´ìš©ë“¤ì„ ë„£ì–´ì¤€ë‹¤
        'name',
        'title',
        'email',
        'url',
        'gender',
        'age',
        'contact',
    ];


    //protected $guarded // ì§€ì •í•œ ì¹¼ëŸ¼ ì œì™¸í•˜ê³  ì…ë ¥ ê°€ëŠ¥



    /* ğŸŸ¢ Modelì˜ ë©”ì†Œë“œë¡œ ì •ì˜ëœ Local Scope ğŸŸ¢ */
    /*  
      ğŸŸ¢ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ì–´ë¥¼ ì²˜ë¦¬í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§ğŸŸ¢
      ìŠ¤ì½”í”„ëŠ” ì¼ì¢…ì˜ ì¿¼ë¦¬ í•„í„°ë¡œ, íŠ¹ì • ì¿¼ë¦¬ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. 
      ì¦‰, ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ ì¡°ê±´ì„ ë©”ì†Œë“œë¡œ ë§Œë“¤ì–´ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
      ë©”ì†Œë“œ ì´ë¦„ ì•ì— 'scope'ë¥¼ ë¶™ì—¬ì„œ ì •ì˜í•©ë‹ˆë‹¤.
    */
    // ğŸŸ¢ğŸŸ¢ ì´ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” search ë¼ê³ ë§Œ ì…ë ¥í•˜ë©´ ëœë‹¤
    public function scopeSearch($query, $search)  // ë©”ì„œë“œ ì´ë¦„ ë§¨ ì•ì— scope ë¶™ì´ê¸° , ì²« ë²ˆì§¸ ì¸ì $queryëŠ” ì¿¼ë¦¬ ë¹Œë”ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë©°, ë‘ ë²ˆì§¸ ì¸ì $searchëŠ” ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ í‚¤ì›Œë“œ
    {
      // ğŸŸ¢ ê²€ìƒ‰ì–´ê°€ ì…ë ¥ ë˜ì–´ìˆìœ¼ë©´ ì‹¤í–‰ 
      if($search !== null){ 
        // $search_split = mb_convert_kana($search, 's'); // ì¼ë³¸ì–´ì¸ ê²½ìš° ì „ê° ìŠ¤í˜ì´ìŠ¤ë¥¼ ë°˜ê° 
        // $search_split2 = preg_split('/[\s]+/', $search_split); //ê³µë°± ë”°ê°œê¸°
   
        // í•˜ë‚˜ ì´ìƒì˜ ì—°ì†ëœ ê³µë°± ë¬¸ìë¥¼ ì°¾ëŠ” ì •ê·œ í‘œí˜„ì‹ 
        $search_split2 = preg_split('/[\s]+/', $search); // í•œêµ­ì–´ ê³µë°± ë”°ê°œê¸°

        //ğŸŸ¢ ë”°ê°œì§„ ê²€ìƒ‰ì–´ ê°œìˆ˜ ë§í¼ ë°˜ë³µ í•˜ë©´ì„œ ë‹¨ì–´ í™•ì¸
        foreach( $search_split2 as $value ){
          $query->where('name', 'like', '%' .$value. '%'); 
        } 
      }

      return $query; // ìƒì„±ëœ ì¿¼ë¦¬ ë°˜í™˜
    } 

}
